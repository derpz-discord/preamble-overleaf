\ProvidesPackage{math-macros}

\usepackage{xargs}
\usepackage{xparse}
\usepackage{mathtools}

% Common shortcuts
\def\mbb#1{\mathbb{#1}}
\def\mfk#1{\mathfrak{#1}}
\def\mc#1{\mathcal{#1}}

\def\bN{\mbb{N}}
\def\bC{\mbb{C}}
\def\bR{\mbb{R}}
\def\bQ{\mbb{Q}}
\def\bZ{\mbb{Z}}


\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}

\newcommandx{\func}[3][1=f]{\ensuremath{#1: #2 \to #3}}


\def\f#1/#2.{\frac{#1}{#2}}


\newcommand{\inv}{^{-1}}
\RenewDocumentCommand\abs{s m}{
    \IfBooleanTF#1
        {\ensuremath{\left\lvert#2\right\rvert}}
        {\ensuremath{\lvert#2\rvert}}
}
\RenewDocumentCommand\norm{s m}{
    \IfBooleanTF#1
        {\ensuremath{\left\lVert#2\right\rVert}}
        {\ensuremath{\lVert#2\rVert}}
}
% \paren* does square brackets, \paren does regular brackets
\NewDocumentCommand\paren{s m}{
    \IfBooleanTF#1
        {\ensuremath{\left[#2\right]}}
        {\ensuremath{\left(#2\right)}}
}
% \bigl parentheses
\NewDocumentCommand\Paren{s m}{
    \IfBooleanTF#1
        {\ensuremath{\bigl[#2\bigr]}}
        {\ensuremath{\bigl(#2\bigr)}}
}

% Text colours
\newcommand{\tblue}[1]{\textcolor{blue}{#1}}
\newcommand{\tred}[1]{\textcolor{red}{#1}}
\newcommand{\tgreen}[1]{\textcolor{green}{#1}}
\newcommand{\tcyan}[1]{\textcolor{black}{#1}}

% Overbrace, Underbrace
\newcommand{\ob}[2]{\ensuremath{\overbrace{#1}^{\text{#2}}}}
\newcommand{\ub}[2]{\ensuremath{\underbrace{#1}_{\text{#2}}}}

% Piecewise
\newcommand{\pw}[2]{\ensuremath{#1 = \begin{cases}#2\end{cases}}}
\newcommand{\piece}[2]{\ensuremath{#1 & \text{if} \, #2 \\}}

% Set theory things
\renewcommand{\emptyset}{\varnothing}
\newcommand*{\medcap}{\mathbin{\scalebox{1.5}{\ensuremath{\cap}}}}
\newcommand*{\medcup}{\mathbin{\scalebox{1.5}{\ensuremath{\cup}}}}

% Proof symbols 
\newcommand{\forwarddir}{\ensuremath{\paren{\Rightarrow} \quad}}
\newcommand{\conversedir}{\ensuremath{\paren{\Leftarrow} \quad}}

% Analysis stuff
\newcommand{\eps}{\varepsilon}
\newcommand{\halfeps}{\frac{\eps}{2}}
\newcommand{\limtoinf}[2]{
    \ensuremath{
        \lim_{#1 \to \infty}{#2}
    }
}
% Usage: \seq{x}{n} -> (x_n)
\newcommand*{\seq}[2]{\ensuremath{\paren{#1_{#2}}}}
\newcommand*{\seqlim}[2]{\ensuremath{\limtoinf{#2}{\seq{#1}{#2}}}}
\NewDocumentCommand{\app}{O{x} O{\infty}}{\xrightarrow{#1\to#2}}
% End analysis stuff

% Algebra macros
\def\zgroup#1.{
    \ensuremath{
        \bZ_{#1} = \set{0, 1, \dotsc, \the\numexpr#1-1}
    }
}

\newcommand{\gen}[1]{
    \ensuremath{
        \langle #1 \rangle
    }
}
% End Algebra macros


% Topology macros
% Usage: \ball{radius}{metric}{point}
% \newcommand{\ball}[3]{\ensuremath{
% B_{#1}^{(#2)} \paren{#3}
% }}
\NewDocumentCommand{\ball}{O{r} o m}{
    \IfNoValueTF{#2}{B_{#1} \paren{#3}}{B_{#1}^{(#2)} \paren{#3}}
}
\newcommand{\cball}[3]{\ensuremath{
B_{#1}^{(#2)} \paren*{#3}
}}
\newcommand{\metrictop}[1]{\ensuremath{\mc T_{#1}}}
% \newcommand{\metricspace}[2]{Let \ensuremath{(#1, #2)} be a metric space}
\newcommandx{\metricspace}[2][1=X, 2=d]{Let \ensuremath{(#1, #2)} be a metric space.}
\newcommand*{\Interior}[1]{\ensuremath{\textnormal{Int} \, #1}}
\newcommand*{\Exterior}[1]{\ensuremath{\textnormal{Ext} \, #1}}
\newcommand*{\Boundary}[1]{\ensuremath{\partial \, #1}}
\newcommand*{\nbhd}[1]{\ensuremath{U_{#1}}}
% \newcommandx{\topospace}[2][1=X, 2=T]{Let \ensuremath{(#1, \mathcal{#2})} be a topological space.}
\NewDocumentCommand{\topospace}{O{X} o}{%
Let \ensuremath{\paren{#1, \IfNoValueTF{#2}{\mc T_{#1}}{#2}}} be a topological space. %
}%
% End topology macros
